<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="img/icons/icon-2.png">
    <link href="https://fonts.googleapis.com/css?family=Poppins:200,400,500,700&display=swap" rel="stylesheet">


    <title>Signin Template for Bootstrap</title>

    <!-- Bootstrap core CSS -->
    <link href="css/bootstrap.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="css/signin.css" rel="stylesheet">
  </head>

  <body class="text-center">
    <form class="form-signin" id="signInForm">
      <img class="mb-4" src="img/logo/logo-eng.png" alt="" width="300" height="60">
      <h1 class="h4 mb-3 mt-2 font-weight-normal">Please sign in</h1>
      <label for="inputEmail" class="sr-only">Email address</label>
      <input type="email" id="inputEmail" class="form-control" placeholder="Email address" required autofocus>
      <label for="inputPassword" class="sr-only">Password</label>
      <input type="password" id="inputPassword" class="form-control" placeholder="Password" required>
      <div class="checkbox mb-3">
        <label>
          <input type="checkbox" value="remember-me"> Remember me
        </label>
      </div>
      <button class="btn btn-lg bg-summer-green text-white py-3 btn-block" type="button" id="login-btn">Sign in</button>
      <p class="mt-5 mb-3 text-muted">&copy; 2021</p>
    </form>
  </body>

<script type="text/javascript" src="js/jquery-3.5.1.min.js"></script>  
<script type="text/javascript">
  $("#login-btn").click(function() {

    var loginData = {
      username: $("#inputEmail").val(),
      password: $("#inputPassword").val()
    }

    function sendData(){
      $.ajax({
      type: "POST",
      data: JSON.stringify(loginData),
      contentType: 'application/json;charset=utf-8',
      dataType: "json",
      url: "https://blog-kfz.herokuapp.com/api/auth/login",
      success: function(result) {
        console.log(result);
        var stringifyResult = JSON.stringify(result);
        var responseData = JSON.parse(stringifyResult);
        localStorage.setItem('accessToken', responseData.accessToken);
        localStorage.setItem('tokenType', responseData.tokenType);
        window.location.assign('addpost.html');
      }
    });
    }
    sendData();

    
  })
</script>
</html>
